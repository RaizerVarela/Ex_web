<html>
<div wm-slider>
    <p>
        <img src="../img/THEMES - art_.jfif" alt="Pintura"
        width="720" height="480" title="Pintura Top">
    </p>

    <p>
        <img src="../img/mirianna on Twitter.jfif" alt="algo1" width="720" height="480">
    </p>

    <p>
        <img src="../img/Minimalistic artwork simple black background.jfif" alt="algo2" width="720" height="480">
    </p>

    <p>
        <img src="../img/20210209_085131.jpg" alt="algo3" width="720" height="480">
    </p>
</div>
<style>
    p{
        position: absolute;
        display: none;
    }
</style>
<script>
    console.log('oi')
    function mover(elemento, inicio, fim, pxPorVez, callback){
        movimento = inicio - pxPorVez
        if(movimento >= fim){
            elemento.style.left = movimento + "px"
            setTimeout(() => mover(elemento, inicio, fim, pxPorVez, callback), 7)
        } else{
            callback()
        }
    }

   // const p = document.querySelector('[wm-slider] > p')
   // p.style.display = 'block'
   // mover(p, 1500, -720, 5, () => {
   //     console.log('Terminou')
   // })

   function slider(){
       const elementos = document.querySelectorAll('[wm-slider] > p')
       const slides = Array.from(elementos)
       exibirSlides(slides, slides[0])
   }

   function exibirSlides(slides, slide){
       slide.style.display = 'block'

       const inicio = innerWidth
       const fim = -slide.clientWidth

       slide.style.left = `${inicio}.px`

       mover(slide, inicio, fim, 5, () =>{
           slide.style.display = 'none'
           exibirSlides(slides, getProximo(slides, slide))
       })
   }
   function getProximo(lista, atual){
       const i = lista.indexOf(atual)+1
       return i < lista.length ? lista[i] : lista[0]
   }

   slider()

   console.log('tchau')
</script>
</html>